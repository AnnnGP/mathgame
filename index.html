```html



    
    
    Competici√≥n Matem√°tica
    
    
    
    
    


    

    
        const { useState, useEffect } = React;

        const TEAMS = [
          { id: 1, name: 'Equipo Rojo', color: 'bg-red-500' },
          { id: 2, name: 'Equipo Azul', color: 'bg-blue-500' },
          { id: 3, name: 'Equipo Verde', color: 'bg-green-500' },
          { id: 4, name: 'Equipo Amarillo', color: 'bg-yellow-500' },
          { id: 5, name: 'Equipo Naranja', color: 'bg-orange-500' },
          { id: 6, name: 'Equipo Morado', color: 'bg-purple-500' }
        ];

        const TIME_LIMITS = { math: 30, sequence: 45, visual: 40 };

        // Iconos desde Lucide
        const Trophy = () => ;
        const Users = () => ;
        const Clock = () => ;
        const Calculator = () => ;
        const Target = () => ;
        const Brain = () => ;

        function App() {
          const [view, setView] = useState('select');
          const [selectedTeam, setSelectedTeam] = useState(null);
          const [scores, setScores] = useState(() => {
            const saved = localStorage.getItem('scores');
            if (saved) return JSON.parse(saved);
            const initial = {};
            TEAMS.forEach(t => initial[t.id] = 0);
            return initial;
          });
          const [currentChallenge, setCurrentChallenge] = useState(null);
          const [answer, setAnswer] = useState('');
          const [feedback, setFeedback] = useState('');
          const [timeLeft, setTimeLeft] = useState(0);
          const [isActive, setIsActive] = useState(false);

          useEffect(() => {
            localStorage.setItem('scores', JSON.stringify(scores));
            window.dispatchEvent(new Event('storage'));
          }, [scores]);

          useEffect(() => {
            const handleStorage = () => {
              const saved = localStorage.getItem('scores');
              if (saved) setScores(JSON.parse(saved));
            };
            window.addEventListener('storage', handleStorage);
            return () => window.removeEventListener('storage', handleStorage);
          }, []);

          useEffect(() => {
            if (isActive && timeLeft > 0) {
              const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);
              return () => clearTimeout(timer);
            } else if (timeLeft === 0 && isActive) {
              setIsActive(false);
              setFeedback('‚è±Ô∏è ¬°Tiempo agotado!');
              setTimeout(() => startNewChallenge(), 2000);
            }
          }, [isActive, timeLeft]);

          useEffect(() => {
            lucide.createIcons();
          });

          const updateScore = (teamId, points) => {
            setScores(prev => ({ ...prev, [teamId]: (prev[teamId] || 0) + points }));
          };

          const resetScores = () => {
            const initial = {};
            TEAMS.forEach(t => initial[t.id] = 0);
            setScores(initial);
          };

          const generateMathChallenge = () => {
            const ops = [
              { type: '+', min: 5, max: 50 },
              { type: '-', min: 5, max: 50 },
              { type: '√ó', min: 2, max: 12 },
              { type: '√∑', min: 2, max: 10 }
            ];
            const op = ops[Math.floor(Math.random() * ops.length)];
            let a, b, result;
            
            if (op.type === '√∑') {
              b = Math.floor(Math.random() * (op.max - op.min + 1)) + op.min;
              result = Math.floor(Math.random() * 10) + 1;
              a = b * result;
            } else {
              a = Math.floor(Math.random() * (op.max - op.min + 1)) + op.min;
              b = Math.floor(Math.random() * (op.max - op.min + 1)) + op.min;
              if (op.type === '+') result = a + b;
              else if (op.type === '-') {
                if (a < b) [a, b] = [b, a];
                result = a - b;
              } else if (op.type === '√ó') result = a * b;
            }
            
            return {
              type: 'math',
              question: `${a} ${op.type} ${b}`,
              answer: result,
              points: op.type === '√ó' || op.type === '√∑' ? 15 : 10
            };
          };

          const generateSequenceChallenge = () => {
            const patterns = [
              { next: 10, desc: '2, 4, 6, 8, ?' },
              { next: 9, desc: '1, 3, 5, 7, ?' },
              { next: 25, desc: '5, 10, 15, 20, ?' },
              { next: 50, desc: '10, 20, 30, 40, ?' },
              { next: 15, desc: '3, 6, 9, 12, ?' },
              { next: 32, desc: '2, 4, 8, 16, ?' },
              { next: 60, desc: '100, 90, 80, 70, ?' }
            ];
            const p = patterns[Math.floor(Math.random() * patterns.length)];
            return {
              type: 'sequence',
              question: `¬øQu√© n√∫mero sigue? ${p.desc}`,
              answer: p.next,
              points: 20
            };
          };

          const generateVisualChallenge = () => {
            const challenges = [
              { question: 'üî¥üî¥üîµüî¥üî¥üîµüî¥üî¥ ¬øQu√© sigue?', options: ['üîµ', 'üî¥', 'üü¢', 'üü°'], answer: 'üîµ' },
              { question: '‚≠ê‚≠ê‚≠êüåô‚≠ê‚≠ê‚≠êüåô ¬øQu√© sigue?', options: ['üåô', '‚≠ê', '‚òÄÔ∏è', 'üåü'], answer: '‚≠ê' },
              { question: 'üü•üü¶üü¶üü•üü¶üü¶ ¬øQu√© sigue?', options: ['üü¶', 'üü•', 'üü©', 'üü®'], answer: 'üü•' },
              { question: '1Ô∏è‚É£2Ô∏è‚É£2Ô∏è‚É£3Ô∏è‚É£3Ô∏è‚É£3Ô∏è‚É£ ¬øQu√© sigue?', options: ['1Ô∏è‚É£', '2Ô∏è‚É£', '3Ô∏è‚É£', '4Ô∏è‚É£'], answer: '4Ô∏è‚É£' },
              { question: 'üåïüåóüåëüåïüåóüåë ¬øQu√© sigue?', options: ['üåï', 'üåó', 'üåë', 'üåò'], answer: 'üåï' }
            ];
            const c = challenges[Math.floor(Math.random() * challenges.length)];
            return { type: 'visual', ...c, points: 25 };
          };

          const startNewChallenge = () => {
            const rand = Math.random();
            let challenge;
            if (rand < 0.4) challenge = generateMathChallenge();
            else if (rand < 0.7) challenge = generateSequenceChallenge();
            else challenge = generateVisualChallenge();
            
            setCurrentChallenge(challenge);
            setAnswer('');
            setFeedback('');
            setTimeLeft(TIME_LIMITS[challenge.type]);
            setIsActive(true);
          };

          const checkAnswer = () => {
            if (!answer && currentChallenge.type !== 'visual') {
              setFeedback('Por favor, introduce una respuesta');
              return;
            }

            setIsActive(false);
            const isCorrect = currentChallenge.type === 'visual'
              ? answer === currentChallenge.answer
              : parseInt(answer) === currentChallenge.answer;

            if (isCorrect) {
              const bonus = timeLeft > TIME_LIMITS[currentChallenge.type] * 0.7 ? 5 : 0;
              const total = currentChallenge.points + bonus;
              updateScore(selectedTeam.id, total);
              setFeedback(`¬°CORRECTO! +${total} puntos ${bonus > 0 ? 'üöÄ ¬°Bonus!' : 'üéâ'}`);
              setTimeout(() => startNewChallenge(), 2000);
            } else {
              setFeedback('‚ùå Incorrecto. ¬°Int√©ntalo de nuevo! üí™');
              setTimeout(() => setFeedback(''), 2000);
              setTimeLeft(TIME_LIMITS[currentChallenge.type]);
              setIsActive(true);
            }
          };

          const getTimeColor = () => {
            if (!currentChallenge) return 'text-green-400';
            const pct = (timeLeft / TIME_LIMITS[currentChallenge.type]) * 100;
            return pct > 60 ? 'text-green-400' : pct > 30 ? 'text-yellow-400' : 'text-red-400';
          };

          // VISTA SELECCI√ìN
          if (view === 'select') {
            return (
              
                
                  
                    üèÜ Competici√≥n Matem√°tica üèÜ
                    Elige tu opci√≥n
                  
                  
                    <button onClick={() => setView('team-select')} className="bg-white rounded-2xl p-8 shadow-2xl hover:scale-105 transition-transform">
                      
                      Jugar
                      Selecciona tu equipo y compite
                    
                    <button onClick={() => setView('display')} className="bg-white rounded-2xl p-8 shadow-2xl hover:scale-105 transition-transform">
                      
                      Pantalla Grande
                      Ver clasificaci√≥n en la PDI
                    
                  
                
              
            );
          }

          // SELECCI√ìN EQUIPO
          if (view === 'team-select') {
            return (
              
                
                  <button onClick={() => setView('select')} className="mb-6 text-white text-lg hover:underline">‚Üê Volver
                  
                    Selecciona tu Equipo
                  
                  
                    {TEAMS.map(team => (
                      <button key={team.id} onClick={() => { setSelectedTeam(team); setView('game'); startNewChallenge(); }}
                        className={`${team.color} rounded-2xl p-6 shadow-2xl hover:scale-105 transition-transform`}>
                        
                          
                          {team.name}
                          {scores[team.id] || 0} puntos
                        
                      
                    ))}
                  
                
              
            );
          }

          // JUEGO
          if (view === 'game' && selectedTeam && currentChallenge) {
            return (
              
                
                  <button onClick={() => { setView('team-select'); setIsActive(false); }} className="mb-4 text-white text-lg hover:underline">‚Üê Cambiar equipo
                  
                    
                      
                        {selectedTeam.name}
                        Puntuaci√≥n: {scores[selectedTeam.id] || 0}
                      
                      
                    
                  
                  
                    
                      
                        {currentChallenge.type === 'math' && }
                        {currentChallenge.type === 'sequence' && }
                        {currentChallenge.type === 'visual' && }
                        
                          {currentChallenge.type === 'math' && 'Matem√°ticas'}
                          {currentChallenge.type === 'sequence' && 'Secuencias'}
                          {currentChallenge.type === 'visual' && 'L√≥gica Visual'}
                        
                      
                      
                        
                        {timeLeft}s
                      
                    
                    
                      {currentChallenge.question}
                      Vale {currentChallenge.points} puntos
                    
                    {currentChallenge.type === 'visual' ? (
                      
                        {currentChallenge.options.map((opt, i) => (
                          <button key={i} onClick={() => { setAnswer(opt); setTimeout(() => checkAnswer(), 100); }}
                            className={`p-8 text-6xl rounded-xl border-4 transition-all ${answer === opt ? 'border-blue-500 bg-blue-50 scale-95' : 'border-gray-300 hover:border-blue-300 hover:bg-gray-50'}`}>
                            {opt}
                          
                        ))}
                      
                    ) : (
                      
                        <input type="number" value={answer} onChange={(e) => setAnswer(e.target.value)}
                          onKeyPress={(e) => e.key === 'Enter' && checkAnswer()}
                          className="w-full p-4 text-3xl text-center border-4 border-gray-300 rounded-xl focus:border-blue-500 focus:outline-none"
                          placeholder="Tu respuesta" autoFocus />
                      
                    )}
                    {currentChallenge.type !== 'visual' && (
                      
                        Comprobar Respuesta
                      
                    )}
                    {feedback && (
                      
                        {feedback}
                      
                    )}
                  
                
              
            );
          }

          // PANTALLA GRANDE
          if (view === 'display') {
            const sorted = [...TEAMS].sort((a, b) => (scores[b.id] || 0) - (scores[a.id] || 0));
            return (
              
                
                  
                    
                       Competici√≥n Matem√°tica 
                    
                    Clasificaci√≥n en Tiempo Real üî•
                  
                  
                    {sorted.map((team, idx) => (
                      
                        
                          
                            {idx + 1}
                            {team.name}
                          
                          
                            {scores[team.id] || 0}
                            puntos
                          
                        
                      
                    ))}
                  
                  
                    <button onClick={() => window.confirm('¬øReiniciar?') && resetScores()}
                      className="bg-red-500 hover:bg-red-600 text-white px-8 py-4 rounded-xl text-xl font-bold shadow-lg transition-colors">
                      Reiniciar Puntuaciones
                    
                    <button onClick={() => setView('select')}
                      className="ml-4 bg-gray-500 hover:bg-gray-600 text-white px-8 py-4 rounded-xl text-xl font-bold shadow-lg transition-colors">
                      Volver al Men√∫
                    
                  
                
              
            );
          }

          return null;
        }

        ReactDOM.createRoot(document.getElementById('root')).render();
    
    
    
        .lucide-icon { 
            width: 64px; 
            height: 64px; 
            margin: 0 auto;
        }
    


```
