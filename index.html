<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathGame - Competencia Matem√°tica (Aut√≥nomo)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
        const { useState, useEffect, useCallback, useMemo } = React;

        const GAME_STORAGE_KEY = 'mathGameProfesorState';

        // --- FUNCIONES DE URL (Para compartir el estado) ---

        const getGameHash = () => {
            const hash = window.location.hash.substring(1);
            if (hash) {
                try {
                    return JSON.parse(decodeURIComponent(hash));
                } catch (e) {
                    return null;
                }
            }
            return null;
        };

        const setGameHash = (state) => {
            const encodedState = encodeURIComponent(JSON.stringify(state));
            window.location.hash = encodedState;
        };

        // --- FUNCIONES DE L√ìGICA DE JUEGO ---

        const generatePin = () => Math.random().toString(36).substring(2, 8).toUpperCase();
        
        const generateQuestion = (questionNumber, difficulty) => {
            const isCalculo = questionNumber % 2 !== 0; 
            
            if (isCalculo) {
                let a, b, answer;
                const operations = ['+', '-', '√ó'];
                const selectedOp = operations[Math.floor(Math.random() * operations.length)];
                let maxVal;

                if (difficulty === 'facil') maxVal = 15;
                else if (difficulty === 'media') maxVal = 30;
                else maxVal = 50;

                a = Math.floor(Math.random() * maxVal) + 1;
                b = Math.floor(Math.random() * maxVal) + 1;

                if (selectedOp === '+') {
                    answer = a + b;
                } else if (selectedOp === '-') {
                    if (a < b) [a, b] = [b, a];
                    answer = a - b;
                } else { // '√ó'
                    if (difficulty === 'facil') b = Math.floor(Math.random() * 8) + 1;
                    answer = a * b;
                }

                const options = [answer];
                while (options.length < 4) {
                    const wrong = answer + (Math.random() > 0.5 ? 1 : -1) * (Math.floor(Math.random() * 10) + 1);
                    if (!options.includes(wrong) && wrong >= 0 && wrong <= 250) options.push(wrong);
                }

                return {
                    type: 'calculo',
                    question: `${a} ${selectedOp} ${b}`,
                    answer: answer,
                    options: options.sort(() => Math.random() - 0.5),
                    icon: 'üßÆ'
                };
            } else {
                const logicQuestions = [
                  { question: 'Si 2+2=5, 3+3=7, 4+4=?', answer: 9, options: [8, 9, 10, 11], hint: 'La respuesta es el doble +1' },
                  { question: 'Un caracol sube 3m de d√≠a y baja 2m de noche. ¬øCu√°ntos d√≠as tarda en subir 10m?', answer: 8, options: [8, 9, 10, 12], hint: 'Piensa en el √∫ltimo d√≠a' },
                  { question: '¬øCu√°l es el siguiente n√∫mero? 2, 4, 8, 16, ?', answer: 32, options: [24, 28, 32, 64], hint: 'Se multiplica por 2' }
                ];
                const q = logicQuestions[Math.floor(Math.random() * logicQuestions.length)];
                return { type: 'logica', ...q, options: [...q.options].sort(() => Math.random() - 0.5), icon: 'üß©' };
            }
        };

        // --- COMPONENTE PRINCIPAL ---

        function MathGame() {
          const [mode, setMode] = useState('selectMode');
          const [gamePin, setGamePin] = useState(generatePin());
          const [inputPin, setInputPin] = useState('');
          
          // Estados de la partida (guardados en localStorage y URL)
          const [teams, setTeams] = useState([]);
          const [numTeams, setNumTeams] = useState(4);
          const [difficulty, setDifficulty] = useState('media');
          const [totalQuestions, setTotalQuestions] = useState(10);
          const [questionData, setQuestionData] = useState(null);
          
          // Estados din√°micos
          const [timeLeft, setTimeLeft] = useState(20);
          const [teamAnswers, setTeamAnswers] = useState({}); // Profesor: Respuestas recibidas
          
          // Estados del Alumno
          const [alumnoState, setAlumnoState] = useState(null); // Alumno: Estado local del juego
          const [alumnoRespuesta, setAlumnoRespuesta] = useState(null);
          const [respuestaEnviada, setRespuestaEnviada] = useState(false);
          const [isGameActive, setIsGameActive] = useState(false);
          const [shareLink, setShareLink] = useState(''); // Enlace para compartir

          
          // ==============================
          // === INICIALIZACI√ìN Y SINCRONIZACI√ìN ===
          // ==============================

          useEffect(() => {
              // 1. Cargar estado desde la URL (Modo Alumno)
              const hashState = getGameHash();
              if (hashState && hashState.mode === 'profesorPlaying') {
                  // El alumno entra por un enlace de partida
                  setAlumnoState(hashState);
                  setMode('alumnoPlaying');
                  setIsGameActive(hashState.isGameActive);
                  setQuestionData(hashState.questionData);
                  setTeams(hashState.teams);
                  setTimeLeft(hashState.timeLeft);
              }
              
              // 2. Cargar estado del profesor desde localStorage si no hay URL hash
              const storedState = JSON.parse(localStorage.getItem(GAME_STORAGE_KEY));
              if (storedState && !hashState) {
                  setTeams(storedState.teams || []);
                  setQuestionData(storedState.questionData || null);
                  setIsGameActive(storedState.isGameActive || false);
                  setTeamAnswers(storedState.teamAnswers || {});
                  setGamePin(storedState.gamePin || generatePin());
                  // No cambiar el modo para evitar bucles, el usuario debe elegir.
              }
          }, []); 

          // Sincronizar Profesor (URL + LocalStorage)
          useEffect(() => {
              if (mode === 'profesorPlaying' || mode === 'resultados') {
                  const stateToSave = {
                      mode: 'profesorPlaying',
                      gamePin,
                      teams,
                      difficulty,
                      totalQuestions,
                      questionData,
                      teamAnswers,
                      timeLeft,
                      isGameActive,
                  };
                  // Guardar para persistencia local del profesor
                  localStorage.setItem(GAME_STORAGE_KEY, JSON.stringify(stateToSave));
                  
                  // Compartir estado via URL (este es el enlace que se distribuye)
                  setGameHash(stateToSave);
                  setShareLink(window.location.href); 
              }
          }, [mode, teams, questionData, teamAnswers, timeLeft, isGameActive]);
          
          // L√≥gica del Temporizador (SOLO PROFESOR)
          useEffect(() => {
            if (mode === 'profesorPlaying' && isGameActive && questionData && !questionData.showResults) {
                if (timeLeft > 0) {
                    const timer = setTimeout(() => {
                        setTimeLeft(t => t - 1);
                    }, 1000);
                    return () => clearTimeout(timer);
                } 
                
                if (timeLeft === 0) {
                    setQuestionData(q => ({...q, showResults: true}));
                }
            }
          }, [timeLeft, mode, isGameActive, questionData]);
          
          
          // ==============================
          // === FUNCIONES PRINCIPALES ===
          // ==============================

          const initGameProfesor = () => {
            const newTeams = Array(numTeams).fill(0).map((_, i) => ({ id: i, name: `Equipo ${i + 1}`, score: 0 }));
            const initialQuestion = generateQuestion(1, difficulty);
            
            setTeams(newTeams);
            setQuestionData({ currentQuestion: initialQuestion, questionNumber: 1, showResults: false });
            setTeamAnswers({});
            setTimeLeft(20);
            setIsGameActive(true);
            setMode('profesorPlaying');
          };

          const nextQuestion = () => {
            if (!questionData) return;

            // 1. Calcular puntos
            const currentQuestion = questionData.currentQuestion;
            const currentQuestionNumber = questionData.questionNumber;
            const newTeams = teams.map(team => {
              const teamAnswer = teamAnswers[team.id];
              const isCorrect = teamAnswer === currentQuestion.answer;
              
              if (isCorrect) {
                const points = difficulty === 'facil' ? 10 : difficulty === 'media' ? 20 : 30;
                return { ...team, score: team.score + points };
              }
              return team;
            });
            
            if (currentQuestionNumber >= totalQuestions) {
                setTeams(newTeams);
                setIsGameActive(false);
                setMode('resultados');
            } else {
                const nextNumber = currentQuestionNumber + 1;
                const nextQuestion = generateQuestion(nextNumber, difficulty);

                setTeams(newTeams);
                setTeamAnswers({});
                setTimeLeft(20);
                setQuestionData({ currentQuestion: nextQuestion, questionNumber: nextNumber, showResults: false });
            }
          };
          
          const handleAlumnoAnswer = (option) => {
              if (!respuestaEnviada) {
                  setAlumnoRespuesta(option);
              }
          };

          const enviarRespuesta = () => {
            if (alumnoRespuesta === null || respuestaEnviada) return;
            
            // Simulaci√≥n: El alumno guarda su respuesta localmente
            setRespuestaEnviada(true);
            
            alert(`Respuesta '${alumnoRespuesta}' enviada. Ahora tienes que avisarle al profesor, y el profesor debe anotar la respuesta manualmente.`);
            // En un juego real, esta respuesta se enviar√≠a al servidor. Aqu√≠, solo la mostramos localmente.
          };

          const salir = () => {
            // Limpia el estado local y la URL
            localStorage.removeItem(GAME_STORAGE_KEY);
            window.location.hash = '';
            setMode('selectMode');
            setTeams([]);
            setQuestionData(null);
            setIsGameActive(false);
          };
          
          // ==============================
          // === VISTAS (JSX) ===
          // ==============================

          if (mode === 'selectMode') {
              return (
                <div className="min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center p-4">
                  <div className="bg-white rounded-lg shadow-2xl p-8 max-w-md w-full">
                    <h1 className="text-4xl font-extrabold text-center mb-2 text-gray-800">üß† MathGame (Aut√≥nomo)</h1>
                    <p className="text-center text-gray-600 mb-8">No requiere claves, usa la URL para compartir el juego.</p>

                    <div className="space-y-4 mb-8">
                      <button onClick={() => setMode('profesorMenu')} className="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 px-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition flex items-center justify-center gap-2">üì∫ Soy Profesor</button>
                      <button onClick={() => setMode('alumnoMenu')} className="w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 px-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition flex items-center justify-center gap-2">üì± Soy Alumno</button>
                    </div>
                  </div>
                </div>
              );
          }


          if (mode === 'profesorMenu') {
            const points = difficulty === 'facil' ? 10 : difficulty === 'media' ? 20 : 30;
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center p-4">
                <div className="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full">
                  <h1 className="text-3xl font-bold text-center mb-6 text-gray-800">Configuraci√≥n Profesor</h1>

                  <div className="bg-yellow-50 border-4 border-yellow-400 p-4 rounded-xl mb-6 text-center shadow-inner">
                    <p className="text-sm font-semibold text-gray-700">C√≥digo de sesi√≥n</p>
                    <p className="text-5xl font-extrabold text-yellow-600 tracking-widest">{gamePin}</p>
                    <p className="text-xs text-gray-600 mt-2">PIN generado localmente.</p>
                  </div>

                  <div className="space-y-6">
                    <div>
                      <label className="block text-sm font-semibold text-gray-700 mb-2">N√∫mero de equipos: <span className="text-blue-600 font-extrabold">{numTeams}</span></label>
                      <input type="range" min="2" max="6" value={numTeams} onChange={(e) => setNumTeams(parseInt(e.target.value))} className="w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer" />
                    </div>

                    <div>
                      <label className="block text-sm font-semibold text-gray-700 mb-2">Dificultad (Puntos por acierto: +{points}):</label>
                      <div className="grid grid-cols-3 gap-2">
                        {['facil', 'media', 'dificil'].map(level => (
                          <button key={level} onClick={() => setDifficulty(level)} className={`w-full py-2 px-4 rounded-lg font-semibold transition shadow ${difficulty === level ? 'bg-blue-600 text-white shadow-xl scale-105' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'}`}>
                            {level.charAt(0).toUpperCase() + level.slice(1)}
                          </button>
                        ))}
                      </div>
                    </div>

                    <div>
                      <label className="block text-sm font-semibold text-gray-700 mb-2">N√∫mero de preguntas: <span className="text-blue-600 font-extrabold">{totalQuestions}</span></label>
                      <input type="range" min="5" max="30" step="5" value={totalQuestions} onChange={(e) => setTotalQuestions(parseInt(e.target.value))} className="w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer" />
                    </div>

                    <button onClick={initGameProfesor} className="w-full bg-gradient-to-r from-green-500 to-teal-600 text-white py-3 px-4 rounded-xl font-bold text-lg hover:shadow-2xl transition shadow-lg">‚ñ∂Ô∏è Comenzar Juego</button>
                    <button onClick={salir} className="w-full bg-gray-500 text-white py-2 px-4 rounded-xl font-semibold hover:bg-gray-600 transition">Volver</button>
                  </div>
                </div>
              </div>
            );
          }

          if (mode === 'profesorPlaying' && questionData) {
            const currentQuestion = questionData.currentQuestion;
            const questionNumber = questionData.questionNumber;
            const showResults = questionData.showResults;
            const timeColor = timeLeft > 10 ? 'text-green-600' : timeLeft > 5 ? 'text-yellow-600' : 'text-red-600';
            const isLogicQuestion = currentQuestion?.type === 'logica';
            const currentPoints = difficulty === 'facil' ? 10 : difficulty === 'media' ? 20 : 30;
            const totalAnswered = Object.keys(teamAnswers).length;

            return (
              <div className="min-h-screen bg-gray-100 flex items-center justify-center p-4">
                <div className="bg-white rounded-xl shadow-2xl p-8 max-w-5xl w-full">
                  <h2 className="text-center text-3xl font-extrabold text-indigo-700 mb-6">Pantalla del Profesor (PIN: {gamePin})</h2>
                  
                  <div className="flex justify-between items-center mb-6 border-b-2 pb-4">
                    <div className="text-center p-3 rounded-lg bg-indigo-50"><p className="text-sm font-semibold text-gray-600">Pregunta</p><p className="text-3xl font-bold text-indigo-600">{questionNumber}/{totalQuestions}</p></div>
                    <div className="text-center p-3 rounded-lg bg-indigo-50"><span className="text-3xl">{currentQuestion?.icon}</span><p className="text-sm font-semibold text-gray-600">{isLogicQuestion ? 'üß© L√≥gica' : 'üßÆ C√°lculo'}</p></div>
                    <div className={`text-center p-3 rounded-lg bg-indigo-50 ${timeColor}`}><p className="text-sm font-semibold text-gray-600">Tiempo</p><p className="text-4xl font-extrabold">{timeLeft}s</p></div>
                  </div>

                  <div className={`rounded-xl p-10 mb-8 text-center shadow-lg border-4 ${isLogicQuestion ? 'bg-gradient-to-r from-purple-100 to-pink-100 border-purple-400' : 'bg-gradient-to-r from-yellow-100 to-yellow-50 border-yellow-400'}`}>
                    <p className={`font-bold ${isLogicQuestion ? 'text-3xl text-purple-800' : 'text-6xl text-gray-800'}`}>{currentQuestion?.question}</p>
                  </div>

                  <div className="grid grid-cols-2 gap-4 mb-8">
                    {currentQuestion?.options.map((option, idx) => (
                      <div key={idx} className={`text-white p-6 rounded-lg font-bold text-3xl text-center opacity-85 shadow-md ${isLogicQuestion ? 'bg-gradient-to-br from-purple-500 to-purple-600' : 'bg-gradient-to-br from-blue-500 to-blue-600'}`}>{option}</div>
                    ))}
                  </div>
                  
                  <div className="mt-8 p-6 bg-yellow-50 rounded-xl border-4 border-yellow-400 shadow-xl">
                      <p className="text-center font-extrabold text-xl mb-4 text-orange-700">üì¢ COMPARTE ESTE ENLACE</p>
                      <input 
                          type="text" 
                          readOnly 
                          value={shareLink} 
                          className="w-full p-2 border border-gray-300 rounded text-sm bg-white overflow-x-scroll"
                          onClick={(e) => e.target.select()}
                      />
                      <p className="text-center text-sm text-gray-600 mt-2">Los alumnos deben abrir este enlace y **refrescar** para ver la nueva pregunta.</p>
                      
                      <div className="mt-6">
                        <p className="text-xl font-bold text-gray-700 mb-3 text-center">ANOTACI√ìN DE RESPUESTAS (Manual)</p>
                        <div className="grid gap-3" style={{ gridTemplateColumns: `repeat(auto-fit, minmax(150px, 1fr))` }}>
                            {teams.map(team => (
                                <div key={team.id} className="p-4 rounded-xl text-center bg-gray-200 shadow">
                                    <p className="font-bold text-sm mb-1">{team.name}</p>
                                    <input 
                                        type="number"
                                        placeholder="Rpta"
                                        value={teamAnswers[team.id] || ''}
                                        onChange={(e) => setTeamAnswers(ans => ({...ans, [team.id]: parseInt(e.target.value) || ''}))}
                                        className="w-full p-1 text-center font-extrabold text-2xl border-2 border-indigo-400 rounded"
                                    />
                                </div>
                            ))}
                        </div>
                      </div>
                      
                      {showResults && (
                        <p className="text-center font-extrabold text-2xl mt-4 text-green-700">‚úì RESPUESTA CORRECTA: <span className="text-4xl text-green-900">{currentQuestion?.answer}</span></p>
                      )}
                      
                      <button onClick={showResults ? nextQuestion : () => setQuestionData(q => ({...q, showResults: true}))} 
                          className="w-full bg-gradient-to-r from-green-500 to-teal-600 text-white py-3 px-4 rounded-xl font-bold text-lg hover:shadow-2xl transition shadow-lg mt-4">
                        {showResults ? (questionNumber < totalQuestions ? 'Siguiente Pregunta ‚Üí' : 'Ver Resultados Finales ‚Üí') : 'Mostrar Respuesta y Puntos ‚Üí'}
                      </button>
                  </div>

                  <button onClick={salir} className="mt-6 w-full bg-red-500 text-white py-2 px-4 rounded-xl font-semibold hover:bg-red-600 transition shadow">üî¥ Salir y Borrar Sesi√≥n Local</button>
                </div>
              </div>
            );
          }
          
          if (mode === 'alumnoPlaying' && alumnoState && alumnoState.questionData) {
            const currentQuestion = alumnoState.questionData.currentQuestion;
            const questionNumber = alumnoState.questionData.questionNumber;
            const isLogicQuestion = currentQuestion?.type === 'logica';
            const showResults = alumnoState.questionData.showResults;
            const timeLeftAlumno = alumnoState.timeLeft;

            return (
              <div className="min-h-screen bg-gradient-to-br from-green-500 to-teal-600 flex items-center justify-center p-4">
                <div className="bg-white rounded-xl shadow-2xl p-8 max-w-2xl w-full">
                  <div className="flex justify-between items-center mb-6 border-b-2 pb-4">
                    <div className="text-center flex-1"><p className="text-sm font-semibold text-gray-600">Pregunta</p><p className="text-3xl font-bold text-green-600">{questionNumber}/{alumnoState.totalQuestions}</p></div>
                    <div className="text-center flex-1"><span className="text-3xl">{currentQuestion?.icon}</span><p className="text-sm font-semibold text-gray-600">{isLogicQuestion ? 'üß© L√≥gica' : 'üßÆ C√°lculo'}</p></div>
                    <div className="text-center flex-1"><p className="text-sm font-semibold text-gray-600">Tiempo</p><p className="text-4xl font-extrabold text-red-600">{timeLeftAlumno}s</p></div>
                  </div>
                  
                  <div className="mb-4 text-center">
                      <button onClick={() => window.location.reload()} className="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg shadow transition">
                          üîÑ Clic para Actualizar Partida
                      </button>
                      <p className="text-xs text-gray-500 mt-1">Si la pregunta no cambia, el profesor no ha avanzado la partida o no has refrescado.</p>
                  </div>

                  <div className={`rounded-xl p-8 mb-8 text-center shadow-md border-4 ${isLogicQuestion ? 'bg-gradient-to-r from-purple-100 to-pink-100 border-purple-400' : 'bg-gradient-to-r from-yellow-100 to-yellow-50 border-yellow-400'}`}>
                    <p className={`font-extrabold ${isLogicQuestion ? 'text-3xl text-purple-800' : 'text-5xl text-gray-800'}`}>{currentQuestion?.question}</p>
                  </div>

                  <div className="grid grid-cols-2 gap-4 mb-6">
                    {currentQuestion?.options.map((option, idx) => (
                      <button key={idx} onClick={() => handleAlumnoAnswer(option)} disabled={respuestaEnviada || timeLeftAlumno === 0}
                        className={`text-white p-6 rounded-xl font-bold text-3xl transition transform shadow-lg 
                          ${alumnoRespuesta === option && !respuestaEnviada ? 'ring-4 ring-yellow-400 scale-105' : ''} 
                          ${respuestaEnviada || timeLeftAlumno === 0 ? 'opacity-50 cursor-not-allowed' : 'hover:scale-[1.02]'}
                          ${isLogicQuestion ? 'bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600' : 'bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600'}`
                        }
                      >
                        {option}
                      </button>
                    ))}
                  </div>

                  {alumnoRespuesta !== null && !respuestaEnviada && timeLeftAlumno > 0 ? (
                    <button onClick={enviarRespuesta} className="w-full bg-gradient-to-r from-green-500 to-teal-600 text-white py-4 px-4 rounded-xl font-bold text-lg hover:shadow-2xl transition shadow-lg">‚úì ¬°Listo! Enviar Respuesta (Avisar Profesor)</button>
                  ) : respuestaEnviada ? (
                    <div className="w-full bg-yellow-500 text-white py-4 px-4 rounded-xl font-bold text-lg text-center shadow-inner">‚úÖ ¬°Respuesta Enviada! Avisa a tu profesor.</div>
                  ) : timeLeftAlumno === 0 ? (
                      <div className="w-full bg-red-500 text-white py-4 px-4 rounded-xl font-bold text-lg text-center shadow-inner">‚è∞ ¬°Tiempo Agotado!</div>
                  ) : (
                    <div className="w-full bg-gray-300 text-gray-700 py-4 px-4 rounded-xl font-bold text-lg text-center shadow-inner">Selecciona una respuesta para enviar</div>
                  )}
                  
                  {showResults && <div className="mt-4 p-4 bg-yellow-100 rounded-lg text-center font-bold text-lg">Respuesta Correcta: <span className="text-xl text-green-700">{currentQuestion.answer}</span></div>}
                  
                </div>
              </div>
            );
          }
          
          if (mode === 'alumnoMenu') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-green-500 to-blue-600 flex items-center justify-center p-4">
                <div className="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full">
                  <h1 className="text-3xl font-bold text-center mb-6 text-gray-800">Unirse a la partida</h1>

                  <div className="space-y-6">
                    <p className="text-center text-gray-600">Pide al profesor el **enlace completo** de la partida. Luego, simplemente abre ese enlace.</p>
                    <button onClick={() => setMode('selectMode')} className="w-full bg-gray-500 text-white py-2 px-4 rounded-xl font-semibold hover:bg-gray-600 transition">Volver</button>
                  </div>
                </div>
              </div>
            );
          }
          
          if (mode === 'resultados' && teams.length > 0) {
            const sortedTeams = [...teams].sort((a, b) => b.score - a.score);

            return (
              <div className="min-h-screen bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center p-4">
                <div className="bg-white rounded-xl shadow-2xl p-8 max-w-2xl w-full">
                  <div className="text-center mb-8">
                    <h1 className="text-5xl font-extrabold text-orange-800 mb-2">üéâ ¬°RESULTADOS FINALES!</h1>
                  </div>

                  <div className="space-y-4 mb-8">
                    {sortedTeams.map((team, idx) => (
                      <div key={team.id} className={`p-5 rounded-xl flex items-center justify-between font-extrabold text-xl shadow-lg ${idx === 0 ? 'bg-yellow-200 border-4 border-yellow-600 text-yellow-900 scale-105' : 'bg-white border-2 border-gray-300 text-gray-700'}`}>
                        <span>{idx === 0 ? 'ü•á' : `${idx + 1}¬∫`} - {team.name}</span>
                        <span className="text-3xl">{team.score} PTS</span>
                      </div>
                    ))}
                  </div>

                  <button onClick={salir} className="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-xl font-bold text-lg hover:shadow-xl transition shadow-lg">Volver al inicio</button>
                </div>
              </div>
            );
          }
          
          return (
            <div className="min-h-screen bg-gray-900 flex items-center justify-center">
                <p className="text-white text-xl">Cargando la aplicaci√≥n...</p>
            </div>
          );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(MathGame, null));
    </script>
</body>
</html>
